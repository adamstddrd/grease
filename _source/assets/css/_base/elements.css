/* ----------------------------------------------------------------------------
default element styles
---------------------------------------------------------------------------- */

:where(*, *::before, *::after)  {
  box-sizing: border-box;
  margin: 0;
  padding: 0;

  &::selection {
    color: var(--color-bg);
    background-color: color-mix(in oklch, var(--color-text), var(--color-bg) 20%);
  }
  
  &:focus-visible {
    outline: var(--border-width-md) var(--color-accent) solid;
    outline-offset: var(--border-width-md);
  }
}

@media (--motion) {
  @view-transition {
    navigation: auto;
  }

  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.1s;
  }
}

html {
  min-block-size: 100dvh;
  color: var(--color-text);
  background-color: var(--color-bg);
  accent-color: var(--color-accent);
  overflow-x: clip;
  font-weight: var(--font-weight);

  @media (--motion) {
    scroll-behavior: smooth;
  }
}

body {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-block-size: 100dvh;
  overflow-x: clip;
  font-family: var(--font-family-main);
  font-size: var(--font-size-base);
  line-height: var(--line-height-fluid);
}

main {
  z-index: 2;
  overflow-y: clip;
}

article {
  > *:first-child {
    margin-block-start: 0;
  }
}

animate-on-scroll {
  display: contents;
}

:where(h1, h2, h3, h4, h5, h6, p, ul, ol, dl, pre, blockquote, form) {
  margin-inline: auto;
  overflow-wrap: break-word;
  margin-block: var(--space-sm);
  color: var(--color-text);
}

:where(h1, h2, h3, h4, h5, h6) {
  inline-size: 100%;
  text-wrap: balance;
  margin-block: var(--space-lg) var(--space-sm);
  line-height: var(--line-height-fluid);
}

h1 {
  margin-block: var(--space-xxl) var(--space-md);
  font-size: var(--font-size-xxl);
  font-weight: var(--font-weight-xxl);
  letter-spacing: var(--letter-spacing-sm);
}

h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-xxl);
}

h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-xl);
  
  h2 + & {
    margin-block: 0;
  }
}

:where(h4, h5, h6) {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-xl);
}

:where(p, ul, ol, dl, pre, blockquote) {
  margin-inline: auto;
  line-height: var(--line-height-fluid);
  overflow-wrap: break-word;
  text-wrap: pretty;
  color: light-dark(
    var(--color-text),
    color-mix(in oklch, var(--color-text), var(--color-bg) 10%)
  );
}

:where(p, ul, ol, dl) {
  margin-inline: 0;
}

:where(a, li, dd, strong, em, i, mark) {
  color: inherit;
}

:where(ul:not([class]), ol:not([class])) {
  padding-inline-start: 1.75ch;
}

:where(li > ul, li > ol) {
  margin-block: 0;
}

ul {
  list-style-type: square;
}

ol {
  list-style-type: decimal;
}

li {
  position: relative;
  color: inherit;
}

b,
strong {
  font-weight: var(--font-weight-xl);
}

i,
em {
  font-style: italic;
}

small {
  font-size: var(--type-sm);
}

mark {
  color: inherit;
  background-color: color-mix(in oklch, var(--color-text), var(--color-bg) 80%);
}

a,
a:visited {
  color: var(--color-accent);
  text-decoration-thickness: var(--border-width-md);
  text-underline-offset: 0.15rem;
  transition: text-decoration-thickness 0.1s ease, color 0.1s ease;
}

@media (--hover) {
  a:hover {
    text-decoration-thickness: calc(var(--border-width-md) * 1.5);
  }
}

pre,
code {
  color: color-mix(in oklch, var(--color-accent), var(--color-text) 50%);
  background-color: var(--color-subtle);
  border-radius: var(--border-radius-sm);
}

pre {
  margin-inline: calc(var(--space-sm) * -1);
  padding-block: var(--space-xs);
  padding-inline: var(--space-sm);
  line-height: var(--line-height-md);
  overflow: auto;
}

code {
  font-family: var(--font-family-code);
  padding: 0.1rem var(--space-xxs);
  font-size: 90%;
  -webkit-box-decoration-break: clone;

  :is(pre) & {
    border: none;
    background-color: transparent;
    padding-block: 0;
    padding-inline: 0;
    overflow: auto;
  }
}

blockquote {
  margin-block: var(--space-md);
  margin-inline: calc(var(--space-sm) * -1) 0;
  padding-inline-start: var(--space-sm);
  font-size: var(--font-size-md);
  border-inline-start: var(--border-width-md) solid oklch(from var(--primary) var(--300));
  text-box: trim-both cap alphabetic;

  & :first-child {
    margin-block-start: 0;
  }

  & :last-child {
    margin-block-end: 0;
  }

  & > p {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-xs);
    text-wrap: balance;
  }

  & > p:has(+ cite) {
    margin-block-end: 0;
  }

  & cite {
    display: block;
    margin-block: 0;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-xl);
    font-style: normal;
    text-transform: uppercase;
  }
}

hr {
  inline-size: 100%;
  margin-block: var(--space-lg);
  border: 0;
  border-block-start: var(--border-width-sm) solid var(--color-border);
}

:where(img, embed, object, svg, video) {
  max-inline-size: 100%;
  block-size: auto;
  line-height: var(--line-height-fluid);
}

details {
  margin-block-end: var(--space-sm);

  &:has(+ &) {
    margin-block-end: 0;
  }
}

dt {
  margin-block-end: 0;
  font-weight: var(--font-weight-xl);
}

dd {
  margin-block-end: var(--space-sm);
}

dialog {
  max-width: var(--line-length-lg);
  margin-block: var(--space-xs);
  margin-inline: auto;
  padding-block: var(--space-md);
  padding-inline: var(--space-md);
  overflow: visible;
  background-color: var(--color-subtle);
  border-radius: var(--border-radius-lg);
  border: var(--border-width-sm) solid var(--color-border);
  box-shadow: var(--shadow-lg);
  transition:
    opacity 0.1s,
    scale 0.1s,
    overlay 0.1s allow-discrete,
    display 0.1s allow-discrete;
  opacity: 0;
  scale: 0.9;
  position: fixed;
  inset-block-start: 50dvh; 
  translate: 0 -50%;

  border-color: light-dark(
    oklch(from var(--neutral) var(--500) / 20%),
    oklch(from var(--primary) var(--900) / 100%)
  );
  outline: var(--border-width-sm) solid light-dark(
    oklch(100% 0 0 / 50%),
    oklch(from var(--primary) 50% c h / 30%)
  );
  outline-offset: calc(var(--border-width-sm) * -2);

  &[style^="position-anchor"] {
    position: absolute;
    margin-inline: 0 var(--space-md);
    padding-block: var(--space-xs);
    padding-inline: var(--space-sm);
    translate: none;
    box-shadow: var(--shadow-md);
    position-visibility: always;
    inset-block-start: inherit;
    inset-block-end: anchor(start);
    inset-inline-start: anchor(start);
    position-try-fallbacks: flip-block, flip-inline;
    position-try-order: most-block-size;
  }

  & :first-child {
    margin-block-start: 0;
  }

  & :last-child {
    margin-block-end: 0;
  }

  &::backdrop {
    transition: all 0.1s ease-in-out;
  }

  &:not([style^="position-anchor"])::backdrop {
    backdrop-filter: blur(0.1rem);
  }

  &:popover-open {
    opacity: 1;
    scale: 1;
  }
}

@starting-style {
  dialog:popover-open {
    opacity: 0;
    scale: 0.9;
  }
}

