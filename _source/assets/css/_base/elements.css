/* ----------------------------------------------------------------------------
element styles
---------------------------------------------------------------------------- */

:where(*, *::before, *::after)  {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  color: var(--color-text);
  font-variation-settings: "wght" var(--font-weight), "MONO" var(--font-mono);

  &::selection {
    background-color: oklch(from var(--color-accent) l c h / 40%);
  }
  
  &:focus-visible {
    outline: var(--border-weight-md) var(--color-accent) solid;
    outline-offset: var(--border-weight-md);
  }
}

html {
  min-height: 100dvh;
  background-color: var(--color-bg);
  accent-color: var(--color-text);
  overflow-x: clip;
  animation: hue-shift 5s linear infinite;

  @media (--motion) {
    scroll-behavior: smooth;
  }
}

body {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-height: 100dvh;
  overflow-x: clip;
  font-family: var(--font-main);
  font-size: var(--size-base);
  line-height: var(--leading-fluid);
  background-color: var(--color-bg);
}

main {
  z-index: 2;
  overflow-y: clip;
}

article {
  > *:first-child {
    margin-block-start: 0;
  }
}

animate-on-scroll {
  display: contents;
}

:where(h1, h2, h3, h4, h5, h6) {
  text-wrap: balance;
}

:where(h1, h2, h3, h4, h5, h6, p, ul, ol, dl, li, pre, blockquote) {
  width: 100%;
  margin-inline: auto;
  line-height: var(--leading-fluid);
  overflow-wrap: break-word;
}

h1 {
  --font-weight: 800;

  margin-block: var(--space-xxl) var(--space-md);
  font-size: var(--size-xxl);
  letter-spacing: var(--tracking-sm);
}

h2 {
  --font-weight: 800;

  margin-block: var(--space-lg) var(--space-sm);
  font-size: var(--size-xl);
}

h3 {
  --font-weight: 700;

  margin-block: var(--space-md) 0;
  font-size: var(--size-lg);
  
  h2 + & {
    margin-block: 0;
  }
}

:where(h4, h5, h6) {
  --font-weight: 600;

  margin-block: var(--space-sm) 0;
  font-size: var(--size-md);
}

:where(p, ul, ol, dl) {
  margin-block: 0 var(--space-sm);
  margin-inline: 0;
}

:where(li > ul, li > ol) {
  margin-block: var(--space-xs) 0;
  padding-inline: 1em 0;
}

ul {
  list-style-type: square;
}

ol {
  list-style-type: decimal;
}

li {
  position: relative;

  &:where(li + li) {
    margin-block-start: 0;
  }

  & :where(ul, ol) {
    margin-block-start: 0;
  }
}

b,
strong {
  --font-weight: 700;
}

i,
em {
  font-style: italic;
}

small {
  font-size: var(--type-sm);
}

mark {
  background-color: oklch(from var(--color-accent) l c h / 40%);
}

a,
a:visited {
  color: var(--color-text);
  text-decoration-thickness: var(--border-weight-sm);
  text-underline-offset: 0.15rem;
  text-decoration-color: var(--color-accent);
  transition: text-decoration-thickness 0.1s ease, color 0.1s ease;
}

@media (--hover) {
  a:hover {
    --color-text: oklch(from var(--color-accent) calc(l / 1.5) c h);

    @media (--dark) {
      --color-text: oklch(from var(--color-accent) calc(l * 1.5) c h);
    }

    text-decoration-thickness: var(--border-weight-md);
  }
}

pre,
code {
  --color-bg: var(--color-secondary-50);
  --color-border: var(--color-secondary-100);

  @media (--dark) {
    --color-bg: oklch(from var(--color-secondary-300) l c h / 10%);
    --color-border: oklch(from var(--color-secondary-300) l c h / 10%);
  }

  background-color: var(--color-bg);
  border: var(--border-weight-sm) solid var(--color-border);
  border-radius: var(--border-radius-sm);
}

pre {
  margin-block: 0 var(--space-sm);
  margin-inline: calc(var(--space-sm) * -1);
  padding-block: var(--space-xs);
  padding-inline: var(--space-sm);
  line-height: var(--leading-md);
  overflow: auto;
}

code {
  font-family: var(--font-code);
  padding: 0.1rem var(--space-xxs);
  font-size: 90%;
  -webkit-box-decoration-break: clone;

  :is(pre) & {
    border: none;
    background-color: transparent;
    padding-block: 0;
    padding-inline: 0;
    overflow: auto;
  }
}

blockquote {
  margin-block: var(--space-xs) var(--space-sm);
  padding-inline-start: var(--space-sm);
  font-size: var(--size-md);
  font-style: italic;
  border-inline-start: var(--border-weight-md) solid var(--color-border);

  > p:has(+ cite) {
    margin-block-end: 0;
  }

  cite {
    --font-weight: 700;
    display: block;
    margin-block: 0;
    font-size: var(--size-sm);
  }
}

hr {
  width: 100%;
  margin-block: var(--space-lg);
  border: 0;
  border-block-start: var(--border-weight-sm) solid var(--color-border);
}

:where(img, embed, object, svg, video) {
  max-width: 100%;
  height: auto;
  line-height: var(--leading-fluid);
}

details {
  margin-block-end: var(--space-sm);

  &:has(+ &) {
    margin-block-end: 0;
  }
}

dt {
  --font-weight: 600;

  margin-block-end: 0;
}

dd {
  margin-block-end: var(--space-sm);
}
